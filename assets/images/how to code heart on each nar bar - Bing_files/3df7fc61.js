var AutoSuggest,__extends,Bing,sa_inst;(function(n){var t;(function(n){var t,i,r,u,f,e;(function(n){n.User="SRCHHPGUSR"})(t=n.CookieNames||(n.CookieNames={})),function(n){n.AutoSuggest="AS"}(i=n.CrumbNames||(n.CrumbNames={})),function(n){n.CursorPosition="cp";n.ConversationId="cvid";n.SuggestionCount="sc";n.PartialQuery="pq";n.SuggestionPosition="sp";n.SuggestionType="qs";n.PreviewPaneSuggestionType="qsc";n.SkipValue="sk";n.PreviewPaneSkipValue="skc";n.Ghosting="ghc";n.Css="css";n.Count="count";n.DataSet="ds";n.SessionId="sid";n.TimeStamp="qt";n.Query="q";n.ImpressionGuid="ig";n.QFQuery="qry";n.FormCode="form";n.HashedMuid="nclid";n.RequestElToken="elvr";n.AppId="appid";n.History="history";n.ApiTextDecoration="textdecorations";n.ClientId="clientid";n.Market="mkt";n.Scope="scope";n.CountryCode="cc";n.HomeGeographicRegion="hgr";n.SetLang="setlang"}(r=n.QueryParams||(n.QueryParams={})),function(n){n.ImpressionGuid="X-MSEdge-IG"}(u=n.Headers||(n.Headers={})),function(n){n.HitHighlighting="h";n.PopularNow="p";n.Local="l";n.Answers="a"}(f=n.Options||(n.Options={})),function(n){n.Id="id";n.Query="query";n.Url="url";n.Navigation="nav";n.Type="stype";n.Autocomplete="hc";n.SubstrateInst="substrateInst"}(e=n.SuggestionAttributes||(n.SuggestionAttributes={}))})(t=n.Service||(n.Service={}))})(AutoSuggest||(AutoSuggest={})),function(n){var t;(function(n){var t;(function(n){function r(n){return n?n[n[t]!==undefined?t:i]:undefined}function u(n,r){n&&r!==null&&r!==undefined&&(n[n[t]!==undefined?t:i]=r)}function f(n){return _w.getComputedStyle?_w.getComputedStyle(n,null):n.currentStyle}function e(n,t){var r=new RegExp("[?&]{1}"+t+"=([^&]+)"),i=n.match(r);return i?i[1]:null}function o(n,t,i){if(n.setSelectionRange)n.setSelectionRange(t,i);else{var r=n.createTextRange();r.moveEnd("sentence",-1e5);r.moveStart("character",t);r.moveEnd("character",i-t);r.select()}}function s(n,t){for(var r,i,u=0;i=t[u];++u)r=n.getAttribute(i),r&&(n[i]=r,i==AutoSuggest.Service.SuggestionAttributes.SubstrateInst&&n.removeAttribute(i))}function h(n){var t=sj_ev(n);return{x:t.clientX,y:t.clientY}}function c(n,t){return function(i){var r=sj_ev(i),u=r.relatedTarget||(r.type=="mouseout"?r.toElement:r.fromElement);t===u||w(t,u)||n.call(t,r)}}function l(n,t){var i=0,r=_d.selection;if(n.selectionStart!=null)i=n.selectionStart;else if(r&&n.createTextRange){t&&n.focus();var u=n.createTextRange(),f=u.duplicate(),e=r.createRange();t&&u.moveToBookmark(e.getBookmark());f.setEndPoint("EndToStart",e);i=f.text.length}return i}function a(n,t){n&&(n.className=n.className.replace(t,""))}function v(n,t){var u,i,r,f;if(n){for(u=n.className.split(" "),i=0,r=u;i<r.length;i++)if(f=r[i],f===t)return;n.className.length>0&&(n.className+=" ");n.className+=t}}function y(n,t){var i=t.replace(/\s+$/g,"");return t[t.length-1]==" "&&n.length>0&&p(t,i,n[0])?i:t}function p(n,t,i){return n==i.substr(0,n.length)||t==i}function w(n,t){if(n===t)return!1;while(t&&t!==n)t=t.parentNode;return t===n}var t="textContent",i="innerText";n.GetInnerText=r;n.SetInnerText=u;n.GetComputedStyle=f;n.GetQueryStringParam=e;n.SetSelectionRange=o;n.RewriteAttribsToProps=s;n.GetMouseCoords=h;n.MouseEnterLeave=c;n.getCursorPosition=l;n.RemoveClassName=a;n.AddClassName=v;n.TrimmedQueryFromSuggestions=y})(t=n.Utils||(n.Utils={}))})(t=n.AS||(n.AS={}))}(Bing||(Bing={})),function(n){var t;(function(n){var t=function(){function n(){this._eventRegistry=[]}return n.prototype.registerEvents=function(n){this._eventRegistry.push(n)},n.prototype.raiseEvent=function(n){for(var i,r,f,u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];for(i=0,r=this._eventRegistry;i<r.length;i++)f=r[i],f.raise(n,u)},n.prototype.clearEvents=function(){this._eventRegistry=[]},n}();n.EventRegisterer=t})(t=n.AS||(n.AS={}))}(Bing||(Bing={})),function(n){var t;(function(n){var t=function(){function n(n){this._eventParent=n;this.events=[]}return n.prototype.add=function(n,t){this.events[n]=t},n.prototype.proxy=function(n){for(var i,r,e,u=this,f=[],t=1;t<arguments.length;t++)f[t-1]=arguments[t];for(i=0,r=f;i<r.length;i++)e=r[i],function(t){u.events[t]=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.splice(0,0,t);n.apply(u._eventParent,r)}}(e)},n.prototype.raise=function(n,t){var i=this.events[n];i&&i.apply(this._eventParent,t)},n}();n.EventRegistration=t})(t=n.AS||(n.AS={}))}(Bing||(Bing={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){var i;(function(n){n.Web="Web";n.Substrate="SSUE"})(i=n.DataSources||(n.DataSources={}));var t=AutoSuggest.Service.QueryParams,r="ajax.unload",u=[t.SuggestionPosition,t.Ghosting,],e=u.concat([t.PartialQuery,t.SuggestionCount,t.SuggestionType,t.SkipValue,t.ConversationId,]),f=function(f){function o(n,t,i,r,u){var e=f.call(this)||this;return e.canvas=n,e._dataProvider=t,e._bingAtWorkDataProvider=i,e._instrumentation=r,e._bingAtWorkSuggestionsParser=u,e.currentQuery="",e.data={},e.ghostInstValue=0,e._cursorPosition=0,e._queryWithCurrentSuggestions="",e._receivedAtLeastOnceValidResponse=!1,e._isDisposed=!1,e._requestSequence=-1,e}return __extends(o,f),o.prototype.init=function(t,i,r){var u=this,e,s,h,c,f,l;for(this.config=t,this._container=i,this.registerAjaxSerpUnloadEvent(),e=0,s=o.ScopeExtensions;e<s.length;e++)h=s[e],h.init(this);o.ScopeExtensions=[];c=function(n,t,i,r){return u.dataProviderCallbackFunc(n,t,i,r)};this._dataProvider.init(t,t.u,c);this.canvas.init(this,t,i,r);f=new n.EventRegistration(this);f.proxy(this.raiseEvent,10,12,11);this._bingAtWorkDataProvider?(l=function(n,t,i){return u.onBingAtWorkResponseReceived(n,t,i)},this._bingAtWorkDataProvider.init(t,"",l),f.add(4,function(n,t,i){u.raiseEvent(4,n,t,i);n.substrateInst&&u._bingAtWorkDataProvider.instrumentClick(n.substrateInst,u.currentQuery)})):f.add(4,function(n,t,i){u.raiseEvent(4,n,t,i)});this.config.parqry&&f.add(13,function(n,t){u.raiseEvent(13,n,t)});this.canvas.registerEvents(f);this.raiseEvent(6,this)},o.prototype.raiseUpdateGhostedText=function(n,t,i){this.raiseEvent(14,n,t,i)},o.prototype.raiseUpdateTextAndRequery=function(n,t){this.raiseEvent(13,n,t)},o.prototype.raiseUpdateText=function(n){this.raiseEvent(12,n)},o.prototype.raiseTextChanged=function(n,t){this.raiseEvent(18,n,t)},o.prototype.setData=function(n){this.data=n},o.prototype.dataProviderCallbackFunc=function(t,r,u,f){if(!this._isDisposed&&this.canvas.searchBoxHasFocus()&&(n.CachedResponseUtils&&n.CachedResponseUtils.checkCachedResponseAndLog&&(t=n.CachedResponseUtils.checkCachedResponseAndLog(t,f)),this.raiseEvent(8),u==this.currentQuery)&&t!=null&&(this.raiseEvent(9,u,r),this._queryWithCurrentSuggestions=u,this.canvas.render(t,this.currentQuery,r,i.Web),this._receivedAtLeastOnceValidResponse=!0,this._instrumentation)){var e=this.data&&this.data.Inst?this.data.Inst.IG:null;this._instrumentation.updateImpressionGuid(e,r)}},o.prototype.onBingAtWorkResponseReceived=function(t,r,u){var f=this,e;!this._isDisposed&&this.canvas.searchBoxHasFocus()&&u==this.currentQuery&&(this._instrumentation.instrumentResponseReceived(r),e=function(t,u){var e=n.BingAtWorkTemplateManager.generateHtml(t);f._instrumentation.instrumentDataSource(t,r,u);f.canvas.render(e,f.currentQuery,r,i.Substrate);e&&f._instrumentation.updateRendered(r)},this._bingAtWorkSuggestionsParser.parse(t,r,e))},o.prototype.getAllSuggestionInstUrl=function(n,t){for(var u,f,o=this.getInstrumentationKeys(t),i=[],r=0,e=o;r<e.length;r++)u=e[r],f=this.getSuggestionInstValue(u,!0,n),f!==null&&(i=i.concat(["&",u,"=",f]));return i.join("")},o.prototype.getAllSuggestionInstObject=function(n,t){for(var r,u,o=this.getInstrumentationKeys(t),f={},i=0,e=o;i<e.length;i++)r=e[i],u=this.getSuggestionInstValue(r,!1,n),u!==null&&(f[r]=u);return f},o.prototype.getInstrumentationKeys=function(n){return n?e:u},o.prototype.getSuggestionInstValue=function(n,i,r){r=r||this.canvas.selectedSuggestion;switch(n){case t.SuggestionCount:return this.canvas.currentSuggestionList.length+"-"+this._queryWithCurrentSuggestions.length;case t.PartialQuery:return i?encodeURIComponent(this.currentQuery):this.currentQuery;case t.SuggestionPosition:return r?""+r.ord:"-1";case t.SuggestionType:return r?r.src:"n";case t.SkipValue:return r&&r.sk?r.sk:"";case t.Ghosting:return this.ghostInstValue==0?null:this.ghostInstValue.toString();case t.ConversationId:return _G.IG;default:return null}},o.prototype.setCursorPosition=function(n){this._cursorPosition=n},o.prototype.finalizeKeystroke=function(){this._instrumentation&&this._requestSequence>-1&&this._instrumentation.finalizeKeystroke(this._requestSequence)},o.prototype.fetch=function(n){this.finalizeKeystroke();this._requestSequence++;this._instrumentation&&this._instrumentation.beginRequest(this._requestSequence);this.fetchWeb(n,this._requestSequence);this._bingAtWorkDataProvider&&this._bingAtWorkDataProvider.fetch(n,this._requestSequence)},o.prototype.fetchWeb=function(i,r){var u,f;this.config.trimwswr&&i.length&&(u=n.Utils.TrimmedQueryFromSuggestions(this.canvas.currentSuggestionList,i),i!=u&&(this._dataProvider.addParam("trim","1"),this._cursorPosition--,this.currentQuery=i=u));this._dataProvider.addParam(t.CursorPosition,this._cursorPosition.toString());f=this._container.parentNode.offsetWidth.toString();this.config.cors?this._dataProvider.addParam("contentWidth",f):this._dataProvider.addHeader("X-Autosuggest-ContentWidth",f);this._receivedAtLeastOnceValidResponse||this._dataProvider.addParam(t.Css,"1");this._dataProvider.fetch(i,r);this.raiseEvent(7,this.currentQuery,r)},o.prototype.registerAjaxSerpUnloadEvent=function(){var n=this,t=function(i){var u=i&&i[1];u&&u.isInstantRequest||(n._isDisposed=!0,sj_evt.unbind(r,t),n.raiseEvent(17),n.clearEvents())};sj_evt.bind(r,t,!1)},o.prototype.setRawQuery=function(n){this.canvas.updateRawQuery(n)},o.prototype.setQuery=function(n){(this.currentQuery=n,n.length!=0||this.config.fetchOnEmpty)&&this.fetch(n)},o}(n.EventRegisterer);f.ScopeExtensions=[];n.WebCore=f})(t=n.AS||(n.AS={}))}(Bing||(Bing={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){var r=AutoSuggest.Service.QueryParams,t=function(){function n(){this._callParams={};this._callHeaders={}}return n.prototype.fetchUrl=function(){},n.prototype.init=function(n,t,i){this._config=n;this._baseUrl=t;this._callbackFunc=i},n.prototype.addParam=function(n,t){this._callParams[n]=t},n.prototype.addHeader=function(n,t){if(this._config.cors)throw"Custom headers are not allowed for cross domain calls";this._callHeaders[n]=t},n.prototype.fetch=function(n,t){this._requestSequence=t;this.addParam(r.ConversationId,_G.IG);var i=this.getFinalUrl(decodeURIComponent(this._baseUrl)+encodeURIComponent(n));this.fetchUrl(i,n,t)},n.prototype.getFinalUrl=function(n){for(var t in this._callParams)n+="&"+t+"="+this._callParams[t];return this._callParams={},n},n}(),i;n.DataProviderBase=t;i=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.fetchUrl=function(n,t,i){var f=this,r=sj_gx(),u;r.open("GET",n,!0);for(u in this._callHeaders)r.setRequestHeader(u,this._callHeaders[u]);this._callHeaders={};r.onreadystatechange=function(){if(r.readyState==4){r.onreadystatechange=function(){};var u=void 0;r.status==200&&(u=r.responseText);f._callbackFunc(u,i,t,n)}};r.withCredentials!==undefined&&(r.withCredentials=!0);r.send()},t}(t);n.DataProvider=i})(t=n.AS||(n.AS={}))}(Bing||(Bing={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){var e=["previousSibling","nextSibling"],o=["lastChild","firstChild"],r="sa_hv",u=/(\s|^)sa_hv/g,i="data-sugcont",f=n.Utils,t=AutoSuggest.Service.SuggestionAttributes,s=function(s){function h(){var n=s.call(this)||this;return n.currentSuggestionList=[],n._ie9orLower=sb_ie&&!_w.atob,n._currentRequestSequence=-1,n._suggestionsQueue={},n}return __extends(h,s),h.prototype.init=function(t,i,r,u){this.autoSuggestInstance=t;this.config=i;this.container=r;this._searchBox=u;this._asContainer=_ge(i.c||"sw_as");var f=new n.EventRegistration(this);f.add(17,this.clearEvents);this.autoSuggestInstance.registerEvents(f)},h.prototype.render=function(t,i,r,u){var h,p,c,l,s,w,a,v,b,y;for(r>this._currentRequestSequence&&(this._suggestionsQueue={},this._currentQuery=i,this._currentRequestSequence=r),this._suggestionsQueue[u]={suggestions:t,rendered:!1,dataSource:u},h=0;h<this.config.enabledDataSources.length;h++){var e=[],o=this.config.enabledDataSources,f=this._suggestionsQueue[o[h]];if(!f)return;if(!f.rendered){for(p=this.createDivFromAjaxResponse(f.suggestions),o[0]==f.dataSource&&(this.container.innerHTML="",this.currentSuggestionList=[],this._currentSuggestion=null,this.selectedSuggestion=null,this._searchBox.removeAttribute("aria-activedescendant")),c=void 0,l=this.container.getElementsByTagName("UL"),s=0;s<l.length;s++)if(l[s].className.indexOf("sa_drw")!=-1){c=l[s];break}if(this.insertAjaxResponseDivIntoDom(c?c:this.container,p),this.buildSuggestions(e),f.rendered=!0,f.dataSource==n.DataSources.Web)if(e.length>0)this.config.bi&&(w={currentQuery:i,suggestionElements:e,requestSequence:r},sj_evt.fire("AS.SuggestionsRendered",w));else for(a=0,v=o;a<v.length;a++)if(b=v[a],b==n.DataSources.Substrate){y=sj_ce("ul",this.config.slid,"sa_drw");y.setAttribute("data-priority","2");this.container.appendChild(y);break}e.length>0&&this.raiseEvent(10,i,e,r,this.container,f.dataSource);o[o.length-1]==f.dataSource&&this.currentSuggestionList.length==0&&this.raiseEvent(11,i)}}},h.prototype.updateRawQuery=function(n){this._rawQuery=n},h.prototype.buildSuggestions=function(n){var e,o,u,r,s;if(this._suggestionsContainer=_ge(this.config.slid),this._suggestionsContainer)for(e=this._suggestionsContainer.getElementsByTagName("li"),o=this.currentSuggestionList.length,u=o;u<e.length;++u)if(r=e[u],s=r.parentNode,s.id==this.config.slid||s.getAttribute(i)){if(r.className.indexOf("sa_hd")!=-1){r.hd=!0;continue}f.RewriteAttribsToProps(r,[t.Url,t.Query,t.Type,t.Autocomplete,t.SubstrateInst]);r.className.indexOf("pp_tile")!=-1&&(r.panel={ot:sb_gt()});r.url.indexOf("/search")==0&&(r.addInst=!0);this.currentSuggestionList.push(r.query);this.decorateSuggestion(r,++o);n.push(r)}},h.prototype.mouseOverSuggestionHandler=function(t,i){var u=n.Utils.GetMouseCoords(t);this._previousMouseCoords=this._previousMouseCoords||u;this._previousMouseCoords&&(this._previousMouseCoords.x!=u.x||this._previousMouseCoords.y!=u.y)&&(this._previousMouseCoords=u,i.className.indexOf(r)==-1&&this.highlightSuggestion(i))},h.prototype.decorateSuggestion=function(t,i){var r=this,u;t.src=t.stype;t.ord=i;sj_be(t,"mousemove",function(n){return r.mouseOverSuggestionHandler(n,t)});sj_be(t,"mouseover",function(i){var u=n.Utils.MouseEnterLeave(function(n){return r.mouseOverSuggestionHandler(n,t)},t);u(i)});sj_be(t,"mousedown",function(n){return r.onMouseDownSuggestion(n,t)});sj_be(t,"mouseup",function(n){r.cancelEventBubbling(n);r.onMouseUpSuggestion(n,t)});u=window.navigator.msPointerEnabled?"onMSPointerDown":"ontouchstart";u.toLowerCase()in _w&&sj_be(t,u.substr(2),function(n){if(t.it="m",n.pointerType)switch(n.pointerType){case n.MSPOINTER_TYPE_TOUCH:t.it="t";break;case n.MSPOINTER_TYPE_PEN:t.it="p"}else t.it="t"})},h.prototype.getTargetElement=function(n,t){var h=e[t],s=o[t],r=n?n[h]:this._suggestionsContainer[s],u,f;return r?(u=r.getAttribute(i),r.hd||r.tagName!="LI"&&!u?r=this.getTargetElement(r,t):u&&(r=r[s])):t==0&&this._currentSuggestion&&(f=this._currentSuggestion.parentNode,this.unHighlightSuggestionHandler(),f.getAttribute(i)&&(r=this.getTargetElement(f,t))),r},h.prototype.selectItem=function(n){var t=this.getTargetElement(this._currentSuggestion,n),i;t?(this.setSearchValue(t),this.highlightSuggestion(t)):this.noItemSelected();this.config.bi&&(i={currentQuery:this._currentQuery,suggestionElements:[t],requestSequence:this._currentRequestSequence},sj_evt.fire("AS.SuggestionSelected",i))},h.prototype.isClickOnElementWithClass=function(n,t){var i=event.target;return i&&i.className.indexOf(t)>-1},h.prototype.cancelEventBubbling=function(n){n=sj_ev(n);sj_sp(n)},h.prototype.highlightSuggestion=function(n){this.unHighlightSuggestionHandler();this._currentSuggestion=n;this.addHighlightClassName(this._currentSuggestion);this._currentSuggestion!=n&&this.addHighlightClassName(n);this._searchBox.setAttribute("aria-activedescendant",n.id);n.setAttribute("aria-selected","true")},h.prototype.unHighlightSuggestionHandler=function(){this._currentSuggestion&&(this.removeHighlightClassName(this._currentSuggestion),this._currentSuggestion.removeAttribute("aria-selected"),this._currentSuggestion=null)},h.prototype.noItemSelected=function(){this.setSearchValue();this.unHighlightSuggestionHandler();this._searchBox.removeAttribute("aria-activedescendant")},h.prototype.addHighlightClassName=function(n){u.test(n.className)||(n.className+=" "+r)},h.prototype.removeHighlightClassName=function(n){f.RemoveClassName(n,u)},h.prototype.onMouseDownSuggestion=function(n,t){n=sj_ev(n);var i=n.button;i==2?(this.cancelEventBubbling(n),sj_pd(n)):this.clickedSuggestion=t},h.prototype.onMouseUpSuggestion=function(n,t){this.clickedSuggestion&&this.clickedSuggestion==t&&(this.config.parqry&&this.isClickOnElementWithClass(n,"as_icon")?this.raiseEvent(13,t.query+" ",!1):(this.setSearchValue(this.clickedSuggestion),this.raiseEvent(4,t,!1,this.config.linkTarget)),this.clickedSuggestion=null)},h.prototype.searchBoxHasFocus=function(){return _d.activeElement==this._searchBox},h.prototype.setSearchValue=function(n){this.selectedSuggestion=n;var t=this._currentQuery;(this.config.trimwsnr||this.config.trimwswr)&&this._rawQuery&&this._rawQuery[this._rawQuery.length-1]==" "&&(t=t+" ");this.raiseEvent(12,n?n.query:t)},h.prototype.getCssHolder=function(){var n=_ge("ajaxStyles");return n||(n=sj_ce("div"),n.id="ajaxStyles",sj_b.insertBefore(n,sj_b.firstChild)),n},h.prototype.insertScriptIntoDom=function(n){var r=this,t=sj_ce("script"),i;t.type=n.type;i=n.getAttribute("src");i?t.setAttribute("src",i):(t.setAttribute("data-bing-script","1"),t.text=n.innerHTML);n.parentNode.removeChild(n);this._asContainer.appendChild(t);sb_st(function(){r._asContainer.contains(t)&&r._asContainer.removeChild(t)},1)},h.prototype.insertStyleIntoDom=function(t){this._ie9orLower?(sj_ic(t.innerHTML),t.parentNode.removeChild(t)):(t.setAttribute("data-rms","1"),this.autoSuggestInstance.config.bi&&n.Utils.AddClassName(t,"bi_preserve"),this.getCssHolder().appendChild(t))},h.prototype.createDivFromAjaxResponse=function(n){if(!n)return undefined;var t=sj_ce("div");return t.innerHTML=n,t},h.prototype.insertAjaxResponseDivIntoDom=function(n,t){var r,u,i;if(t){for(r=_d.createDocumentFragment(),u=t.childNodes;u.length;){i=u[0];switch(i.tagName){case"SCRIPT":this.insertScriptIntoDom(i);break;case"STYLE":this.insertStyleIntoDom(i);break;default:r.appendChild(i)}}n.appendChild(r)}},h}(n.EventRegisterer);n.Canvas=s})(t=n.AS||(n.AS={}))}(Bing||(Bing={})),function(n){var t;(function(n){var t=function(){function t(t,i){this._config=t;this._container=i;this._isRtl=n.Utils.GetComputedStyle(sj_b).direction=="rtl";this._searchBoxElem=_ge(t.i);this._outerContainer=sj_ce("div","","sa_as");this._outerContainer.setAttribute("data-priority","2");this._container.appendChild(this._outerContainer)}return t.prototype.getSuggestionsDrawer=function(){return this._outerContainer},t.prototype.show=function(){this._outerContainer.style.display="block"},t.prototype.hide=function(){this._outerContainer.style.display="none"},t.prototype.update=function(){var i,r,t=n.Utils.GetComputedStyle(this._container.parentNode);this._isRtl?(r=(this.toFloat(t.paddingRight)+this.toFloat(t.borderRightWidth))*-1,i=this.toFloat(t.borderLeftWidth)-this.toFloat(t.paddingLeft)):(i=(this.toFloat(t.paddingLeft)+this.toFloat(t.borderLeftWidth))*-1,r=this.toFloat(t.borderRightWidth)-this.toFloat(t.paddingRight));this._container.style.marginLeft=i+"px";this._container.style.marginRight=r+"px";this._searchBoxElem!=null&&this._searchBoxElem.dir.length>0&&(this._outerContainer.dir=this._searchBoxElem.dir)},t.prototype.toFloat=function(n){var t=parseFloat(n);return isNaN(t)?0:t},t}();n.Layout=t})(t=n.AS||(n.AS={}))}(Bing||(Bing={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){function f(n){return typeof n=="number"?n:'"'+n.replace(/"/g,'\\"')+'"'}var t="SRCHHPGUSR",i="AS",o=4,r="AS.CurrentImpressionQuerySelected",u=sb_ie&&sb_de.style.opacity===undefined,e=function(e){function s(n,t){var i=e.call(this)||this,r,u,f;for(i.config=n,i.autosuggest=t,i._pollInterval=0,i._pendingRequestCount=0,i._bRequeryOnTextChange=!0,i._hiddenFields=[],i._lastQuery="",i._lastRawQuery="",i._trimRegex=new RegExp("^\\s*","g"),i._removeSpacesRegex=new RegExp("\\s+","g"),i._lastTextChanged="",i._textChangeSequence=0,i._selectSearchBoxValueOnClick=!1,i.raiseEvent(5,n),r=0,u=s.ScopeExtensions;r<u.length;r++)f=u[r],f.init(i);return s.ScopeExtensions=[],i}return __extends(s,e),s.prototype.init=function(t){var e,u,f,r,o,s,i;(this.config.globalId=t,this.config.slid="sa_ul",this._bDisabled=this.isDisabled())||(_w._H&&_w._H.ajax?(e=_ge("serpHeader"),e&&(u=e.getElementsByTagName("form"),u&&u.length>0&&(this.searchForm=u[0],f=this.searchForm.getElementsByClassName("b_searchbox"),f&&f.length>0&&(this.searchBox=f[0])))):(this.searchForm=_ge(this.config.f),this.searchBox=_ge(this.config.i)),this.searchForm.form&&(this.config.fc=this.searchForm.form.value),this._currentImpressionQuery=this.searchBox.value,r=_ge(this.config.c||"sw_as"),r.setAttribute("role","listbox"),r.setAttribute("aria-label",sa_loc.Suggestions),sj_be(r,"mousedown",function(n){return sj_sp(n)}),r.style.display="block",this.layout=this._layout=new n.Layout(this.config,r),this.layout.update(),this.registerUIElement(r),this.registerUIElement(this.searchBox),o=_ge("sb_form_go"),o&&this.registerUIElement(o),this._pollInterval=this.config.d,this._pollThrottlingEnabled=this.config.t,s=this._layout.getSuggestionsDrawer(),this.autosuggest.init(this.config,s,this.searchBox),this._lastQuery=this.getQueryToFetch(),this.searchBox.setAttribute("role","combobox"),this.searchBox.setAttribute("aria-autocomplete","both"),this.searchBox.setAttribute("aria-haspopup","true"),this.searchBox.setAttribute("aria-expanded","false"),this.searchBox.setAttribute("aria-controls","sw_as"),this.searchBox.setAttribute("aria-owns","sw_as"),i=new n.EventRegistration(this),i.add(8,this.handleResponseReceived),i.add(11,this.startNoMatchTimeout),i.add(10,this.showDropDown),i.add(12,this.onUpdateText),i.add(13,this.onUpdateTextAndRequery),i.add(14,this.onUpdateGhostedText),i.add(4,this.navigate),i.add(17,this.dispose),this.autosuggest.registerEvents(i),this.bindEvents(sj_be,sj_evt.bind),this.pollForQueryChange(),this.raiseEvent(6,this))},s.prototype.setData=function(n){this.autosuggest.setData(n)},s.prototype.getCurrentImpressionQuery=function(){return this._currentImpressionQuery},s.prototype.isDisabled=function(){return sj_cook.get(t,i)=="0"},s.prototype.enable=function(n){n&&(this._lastQuery=this.getQueryToFetch());this._bDisabled=!n;sj_cook.set(t,i,n?"1":"0",!0,"/")},s.prototype.registerUIElement=function(n){sj_be(n,"touchend",sj_sp);sj_be(n,"click",sj_sp)},s.prototype.addHiddenField=function(n,t){var i=sj_ce("input");return i.id="sa_"+n,i.name=n,i.value=t,i.type="hidden",this.searchForm.appendChild(i),this.config.sbt&&this._hiddenFields.push(i),i},s.prototype.cancelDefaultHandler=function(n){sj_sp(n);sj_pd(n)},s.prototype.show=function(){this.onSearchBoxClick()},s.prototype.getCursorPosition=function(){return n.Utils.getCursorPosition(this.searchBox,!0)},s.prototype.makeAutoSuggestGPingCall=function(n){var t=_ge(n.replace("&","")),e;if(t&&document.images){var u=t.getAttribute("h"),r=void 0,i={a:[],add:function(n,t){this.a.push(f(n)+":"+f(t))},get:function(){return this.a.length?"&PR={"+this.a.join(",")+"}":""}};i.add("i",this.autosuggest.canvas.clickedSuggestion?t.it||"m":"k");this.autosuggest.ghostInstValue&&i.add("ghc",this.autosuggest.ghostInstValue);t.panel&&i.add("et",sb_gt()-t.panel.ot);r=this.autosuggest.data&&this.autosuggest.data.Inst?this.autosuggest.data.Inst.IG:null;r&&u&&(e=new Image,e.src=_G.gpUrl+"IG="+r+"&"+u+i.get())}return!0},s.prototype.navigate=function(n,t,i){var u=this,r;sb_st(function(){return u.hideDropDown()},5);this.makeAutoSuggestGPingCall(n.id);r=n.query;r!=undefined&&this.updateSearchBoxValue(r);this.config.sbt?this.submitForm(t,n.url):this.navigateToUrl(n,t,i)},s.prototype.submitForm=function(n,t){var e,c,i,u,s,h,f;if(this.config.sbt){for(e=void 0;e=this._hiddenFields.shift();)this.searchForm.removeChild(e);this._hiddenFields=[]}if(n&&(this.raiseEvent(15),this.config.bi&&this._currentImpressionQuery===this.searchBox.value)){sj_evt.fire(r);return}this._instrumentationData=this.autosuggest.getAllSuggestionInstObject(null,n);c=this.getCustomUrlParams(t);i=_ge("sa_ghc");i&&i.parentNode.removeChild(i);for(var l=0,o=void 0,a=[this._instrumentationData,c];o=a[l++];)for(u in o)i=_ge("sa_"+u),s=o[u],i?i.value=s:this.addHiddenField(u,s);this.autosuggest.ghostInstValue=0;n||sj_evt.fire("onSearch",this.searchForm);this.makeSearchboxGPingCall();this.fireEvt?(h=this.searchForm.getAttribute("action"),t&&this.searchForm.setAttribute("action",t),this.searchForm.submit(),this.firePartnerEvents(n),h&&this.searchForm.setAttribute("action",h)):_w._H&&_w._H.ajax&&_w.sj_isAjax&&n||this.searchForm.submit();this.fireEvt&&(this.autosuggest.canvas.selectedSuggestion=null,this.autosuggest.ghostInstValue=0,f=_ge("sa_ghc"),!this._instrumentationData.ghc&&f&&f.parentNode.removeChild(f));this.config.selectValueOnClickAfterNavigate&&(this._selectSearchBoxValueOnClick=!0)},s.prototype.makeSearchboxGPingCall=function(){var t=this.searchForm.getAttributeNode("onsubmit"),n;t&&_w.si_T&&(n=t.value.match(/si_T\('(.*)'\)/),n&&n[1]&&_w.si_T(n[1]))},s.prototype.navigateToUrl=function(n,t,i){if(this.searchForm.onsubmit)this.searchForm.onsubmit(null);if(this.firePartnerEvents(t),this.config.bi&&this._currentImpressionQuery===n.query){sj_evt.fire(r);return}var u=n.url+(n.addInst?this.autosuggest.getAllSuggestionInstUrl():"");u=this.addExtraQueryStrings(u);i?_w.open(u,i):typeof sj_lc!="undefined"?sj_lc(u):_w.location.href=u},s.prototype.firePartnerEvents=function(n){!n&&this.fireEvt&&this.fireEvt(this.searchForm,"ASSugClicked")},s.prototype.getCustomUrlParams=function(n){var r={},t;if(n)for(var i=void 0,f=/\+/g,e=/([^&=]+)=?([^&]*)/g,u=function(n){return decodeURIComponent(n.replace(f," "))},o=n.substring(n.indexOf("?")+1);i=e.exec(o);)t=u(i[1]).toLowerCase(),t!=="q"&&t!=="form"&&(r[t]=u(i[2]));return r},s.prototype.bindEvents=function(n,t){var i=this,r;n(sj_b,"click",function(){return i.hideDropDownOnFocusChange()});n(sj_b,"touchend",function(){return i.hideDropDownOnFocusChange()});n(this.searchForm,"submit",function(n){return i.onSubmit(n)});n(this.searchBox,"keydown",function(n){return i.onSearchBoxKeyDown(n)});n(this.searchBox,"click",function(){return i.onSearchBoxClick()});this.fireEvt&&n(_w,"blur",function(){return i.hideDropDownOnFocusChange()});r=function(){t("focusChange",function(n){return i.focusChange(n)});t("hideDrawer",function(){return i.hideDropDown()})};r();this.config.bi&&t("ajax.load",function(n){var t=n&&n[1];t&&t.isInstantRequest&&(i._currentImpressionQuery=t.query||i.searchBox.value,i.pollForQueryChange(),r())});"oninput"in this.searchBox&&n(this.searchBox,"input",function(){return i.onTextInput()})},s.prototype.onSubmit=function(n){var i=this,t;sb_st(function(){return i.hideDropDown()},5);this.cancelDefaultHandler(n);t=this.autosuggest.canvas.selectedSuggestion;t?this.navigate(t,!0,this.config.linkTarget):this.submitForm(!0)},s.prototype.onSearchBoxKeyDown=function(n){this.handleUpDownEscKeys(n)},s.prototype.handleUpDownEscKeys=function(n){var t=n.keyCode;switch(t){case 27:this.isQueryGhosted()||(this.hideDropDown(),this.cancelDefaultHandler(n));break;case 38:this._isLayoutVisible&&(this.autosuggest.canvas.selectItem(0),this.cancelDefaultHandler(n));break;case 40:this._isLayoutVisible?this.autosuggest.canvas.selectItem(1):this.config.fetchOnDownArrowKey&&this.fetchForCurrentQuery();break;case 9:this.isQueryGhosted()||this.hideDropDownOnFocusChange()}},s.prototype.onSearchBoxClick=function(){this._isLayoutVisible||(this._selectSearchBoxValueOnClick&&(this._selectSearchBoxValueOnClick=!1,n.Utils.SetSelectionRange(this.searchBox,0,this.searchBox.value.length)),this.fetchForCurrentQuery())},s.prototype.fetchForCurrentQuery=function(){(this._noResultsTimeout&&sb_ct(this._noResultsTimeout),this._bDisabled)||(this._lastQuery=null,this.fetchSuggestions(this.getQueryToFetch(),this.getCurrentQuery(!0)))},s.prototype.showDropDown=function(){this._layout.update();this._isLayoutVisible||(sj_evt.fire("focusChange",this.searchBox),this.searchBox.setAttribute("aria-expanded","true"),this._layout.show(),this._isLayoutVisible=!0,sb_i6&&sj_evt.fire("autosuggestShown",this.searchBox),sj_evt.fire("onPopTR"))},s.prototype.hideDropDownOnFocusChange=function(){this.hideDropDown()},s.prototype.hideDropDown=function(){this._isLayoutVisible&&(this._layout.hide(),this._isLayoutVisible=!1,this._lastQuery=this.getQueryToFetch(),this.raiseEvent(16),this.autosuggest.finalizeKeystroke(),sb_i6&&sj_evt.fire("autosuggestHide",this.searchBox),_w._H&&sj_evt.fire("ASHide"))},s.prototype.focusChange=function(n){n[1]!==this.searchBox&&this.hideDropDown()},s.prototype.startNoMatchTimeout=function(){var n=this;this._noResultsTimeout=sb_st(function(){return n.hideDropDown()},50)},s.prototype.onUpdateText=function(n){this.getCurrentQuery()!=n&&(this._bRequeryOnTextChange=!1);this.updateSearchBoxValue(n)},s.prototype.updateSearchBoxValue=function(t,i){var r=i?t+i:t,f;this._autoCompletedPrefixLength=i?t.length:null;r!==null&&(this.searchBox.value=r,u||this.searchBox.setAttribute("value",r),f=r.length,n.Utils.SetSelectionRange(this.searchBox,f,f),t&&t!=this._lastTextChanged&&this.triggerTextChangedEvent(t))},s.prototype.onUpdateTextAndRequery=function(t,i){if(this._bRequeryOnTextChange=!0,this.updateSearchBoxValue(t),!i){var r=t.length;this.searchBox.focus();n.Utils.SetSelectionRange(this.searchBox,r,r)}},s.prototype.onUpdateGhostedText=function(n,t,i){this._bRequeryOnTextChange=i===undefined?!0:i;this.updateSearchBoxValue(n,t)},s.prototype.onTextInput=function(){var n=this.searchBox.value;this.triggerTextChangedEvent(n)},s.prototype.triggerTextChangedEvent=function(n){this._lastTextChanged=n;this.autosuggest.raiseTextChanged(n,++this._textChangeSequence)},s.prototype.pollForQueryChange=function(){var r=this,t,n,i;this._bDisabled||(t=this.getCurrentQuery(!0),this._lastRawQuery!=t&&(this.autosuggest.setRawQuery(t),this._lastRawQuery=t,this.config.bi&&sj_evt.fire("AS.RawQueryChanged"),n=this.getQueryToFetch(),this._lastQuery==n&&this._bRequeryOnTextChange||u||this.searchBox.setAttribute("value",n),n!=this._lastQuery&&(this._bRequeryOnTextChange&&!this.suppressRequestForQuery?this.fetchSuggestions(n,t):this._bRequeryOnTextChange||(this._bRequeryOnTextChange=!0),this._lastQuery=n)),i=this._pollInterval,this._pollThrottlingEnabled&&(i*=1<<Math.max(0,this._pendingRequestCount-o+1)/2),sb_st(function(){return r.pollForQueryChange()},i))},s.prototype.fetchSuggestions=function(n,t){this._noResultsTimeout&&sb_ct(this._noResultsTimeout);this.autosuggest.setCursorPosition(this.adjustCursorPositionForModifiedQuery(t,n));this.autosuggest.setQuery(n);n.length!=0||this.config.fetchOnEmpty||this.hideDropDown();this._pendingRequestCount++},s.prototype.adjustCursorPositionForModifiedQuery=function(n,t){var r=this.getCursorPosition(),i;if(t!==n&&t!="")for(i=0;i<n.length&&n[i]!=t[0];i++)r--;return r},s.prototype.handleResponseReceived=function(){this._pendingRequestCount--},s.prototype.getQueryToFetch=function(){var t=this.getCurrentQuery();return this.config.trimwsnr&&(t=n.Utils.TrimmedQueryFromSuggestions(this.autosuggest.canvas.currentSuggestionList,t)),t},s.prototype.isQueryGhosted=function(){return!!this._autoCompletedPrefixLength},s.prototype.getCurrentQuery=function(n){var t=this._autoCompletedPrefixLength?this.searchBox.value.substr(0,this._autoCompletedPrefixLength):this.searchBox.value;return n?t:t.replace(this._trimRegex,"").replace(this._removeSpacesRegex," ").toLowerCase()},s.prototype.addExtraQueryStrings=function(n){return n},s.prototype.getLastRequestedQuery=function(){return this._lastQuery},s.prototype.dispose=function(){this.clearEvents();this.bindEvents(sj_ue,sj_evt.unbind);sb_ct(this._noResultsTimeout)},s}(n.EventRegisterer);e.ScopeExtensions=[];n.SearchForm=e})(t=n.AS||(n.AS={}))}(Bing||(Bing={})),function(n){var t;(function(n){var t=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,i=function(){function i(){this._imeInProgress=!1}return i.prototype.init=function(t){if(t.config.eHC){var i=new n.EventRegistration(this);i.add(6,this.onSearchFormInitialized);t.registerEvents(i)}this._instantEnabled=!!t.config.bi},i.prototype.onSearchFormInitialized=function(i){var r=this,u=i.autosuggest,e;u.ghostInstValue=0;var c=function(){return u.ghostInstValue=2},l=function(){u.ghostInstValue==0&&(u.ghostInstValue=1)},f=i.searchBox,s=function(t,i){return n.Utils.SetSelectionRange(f,t,i)};this.isCursorPositionAtTheEnd=function(){return i.getCursorPosition()==r.getPartialQuery().length};this.getSearchBoxValue=function(){return f.value};this.getPartialQuery=function(){return i.getCurrentQuery(!0)};this.getGhostedQuery=function(){return i.isQueryGhosted()?r.getSearchBoxValue():null};this.getCurrentImpressionQuery=i.getCurrentImpressionQuery;this.resetGhosting=function(n,t,i){if(u.raiseUpdateGhostedText(null,null,n),t){var f=r.getSearchBoxValue().length;s(f,f)}i&&c()};this.removeGhosting=function(n){n?u.raiseUpdateTextAndRequery(r.getPartialQuery()):u.raiseUpdateText(r.getPartialQuery())};this.setGhostValue=function(n,t){t?(u.raiseUpdateGhostedText(n,t),s(n.length,(n+t).length),l()):u.raiseUpdateTextAndRequery(n)};var a=function(n){return r.handleSearchBoxKeyPress(n)},v=function(n){return r.handleSearchBoxKeyDown(n)},y=function(){return r.handleSearchBoxMouseDown()},p=function(){return r.removeGhosting(!1)},w=function(){return r.handleCompositionStart()},b=function(){return function(){return r.handleCompositionEnd()}},k=function(n){return r.handleSearchBoxKeyUp(n)},h=function(n,i){n(f,"keypress",a);n(f,"keydown",v);n(f,"mousedown",y);i("onFeedbackStarting",p);t?(n(f,"compositionstart",w),n(f,"compositionend",b)):n(f,"keyup",k)},o=new n.EventRegistration(this);o.add(10,this.handleSuggestionsRendered);o.add(17,function(){return h(sj_ue,sj_evt.unbind)});u.registerEvents(o);e=new n.EventRegistration(this);e.add(15,function(){r.getGhostedQuery()&&r.resetGhosting(!1,!0,!0)});e.add(16,this.onDropDownHidden);i.registerEvents(e);h(sj_be,sj_evt.bind)},i.prototype.onDropDownHidden=function(){var n=this.getGhostedQuery();n&&(this._instantEnabled?this.getCurrentImpressionQuery()===n&&this.resetGhosting(!1,!0,!0):this.removeGhosting(!1))},i.prototype.handleCompositionStart=function(){this._imeInProgress=!0},i.prototype.handleCompositionEnd=function(){this._imeInProgress&&(this._imeInProgress=!1,this.resetGhosting(!0,!1,!1),this._pendingGhostFirstSuggestion&&sb_st(this._pendingGhostFirstSuggestion,0))},i.prototype.ghostFirstSuggestion=function(n,t,i){var r,u,f,e,o;if((this._pendingGhostFirstSuggestion=null,n&&t==n.toLowerCase())&&this._lastKeyDown!=46&&this._lastKeyDown!=8&&this.isCursorPositionAtTheEnd()){for(u=0,f=i;u<f.length;u++)if(e=f[u],e.hc){r=e.query;break}r&&r.indexOf(t)==0&&r.length>n.length?(o=r.slice(n.length),this.setGhostValue(n,o)):this.getGhostedQuery()&&this.removeGhosting(!0)}},i.prototype.handleSuggestionsRendered=function(t,i,r,u,f){var o=this,e;f==n.DataSources.Web&&(e=this.getPartialQuery(),this._imeInProgress?this._pendingGhostFirstSuggestion=function(){return o.ghostFirstSuggestion(e,t,i)}:this.ghostFirstSuggestion(e,t,i))},i.prototype.handleSearchBoxKeyDown=function(n){var r=this,i=this._lastKeyDown=n.keyCode,u;if(n.ctrlKey&&i==90){sj_pd(n);return}(t||this._imeInProgress||i!=229||this.handleCompositionStart(),!this._imeInProgress&&this.getGhostedQuery()&&i!=38&&i!=40)&&(i==13?this.resetGhosting(!1,!0,!0):i==37||i==33||n.shiftKey&&i==39?this.resetGhosting(!1,!1,!0):i==35||i==34||i==39||n.ctrlKey&&i==65?this.resetGhosting(!0,!1,!0):i==9?(this.resetGhosting(!0,!0,!0),sj_pd(n)):i==27||n.ctrlKey&&i==8?(this.removeGhosting(!0),sj_pd(n)):i==46||i==8||n.ctrlKey&&i==88?this.resetGhosting(!0,!1,!1):n.ctrlKey&&i==86||n.shiftKey&&i==45?this.removeGhosting(!0):(u=this.getSearchBoxValue().toLowerCase(),sb_st(function(){u!=r.getSearchBoxValue().toLowerCase()&&r.resetGhosting(!0,!1,!1)},0)))},i.prototype.handleSearchBoxKeyUp=function(n){var t=n.keyCode;this._imeInProgress&&(t==13||t==27||t==8||t==37||t==39)&&this.handleCompositionEnd()},i.prototype.handleSearchBoxKeyPress=function(n){var t=this.getGhostedQuery();if(t){var i=n.char?n.char:String.fromCharCode(n.charCode?n.charCode:n.keyCode),r=this.getPartialQuery(),u=t.slice(r.length);u.charAt(0)==i.toLowerCase()&&(this.setGhostValue(r+i,u.slice(1)),sj_pd(n))}},i.prototype.handleSearchBoxMouseDown=function(){this.getGhostedQuery()&&this.resetGhosting(!1,!1,!0)},i}();n.SearchForm.ScopeExtensions.push(new i)})(t=n.AS||(n.AS={}))}(Bing||(Bing={})),function(n){var t;(function(n){var t=function(){function t(){}return t.prototype.getCallbacks=function(){var t=new n.EventRegistration(this);return t.add(11,this.onNoResults),t.add(10,this.onSuggestionsRendered),t},t.prototype.set=function(n){this._data=n;this._data.currentQuery.length<=1&&(this._lastQueryWithNoResults=null)},t.prototype.match=function(){return this._lastQueryWithNoResults&&this._data.currentQuery.substr(0,this._lastQueryWithNoResults.length)==this._lastQueryWithNoResults},t.prototype.onNoResults=function(n){this._lastQueryWithNoResults=n},t.prototype.onSuggestionsRendered=function(t,i,r,u,f){f==n.DataSources.Web&&(this._lastQueryWithNoResults=null)},t}(),i=function(){function i(){this._rules=[]}return i.prototype.init=function(t){var i=new n.EventRegistration(this);i.add(6,this.onSearchFormInitialized);t.registerEvents(i)},i.prototype.onSearchFormInitialized=function(n){this._searchFormInstance=n;this.addRules();this.addCallbacks()},i.prototype.addRules=function(){var n=this._searchFormInstance.config;n.suppnores&&this._rules.push(new t(n))},i.prototype.addCallbacks=function(){var o=this._rules.length,i,r,t,u,e,f;if(o)for(i=this._searchFormInstance.autosuggest,r=new n.EventRegistration(this),r.add(18,this.onTextChanged),i.registerEvents(r),t=0,u=this._rules;t<u.length;t++)e=u[t],f=e.getCallbacks(),f&&i.registerEvents(f)},i.prototype.updateDataForRules=function(){var n,t,i;for(this._data={currentQuery:this._searchFormInstance.getCurrentQuery()},n=0,t=this._rules;n<t.length;n++)i=t[n],i.set(this._data)},i.prototype.getSuppressRequestForQuery=function(){var n,t,i;if(this._data.currentQuery.length>1)for(n=0,t=this._rules;n<t.length;n++)if(i=t[n],i.match())return 1;return 0},i.prototype.onTextChanged=function(){this.updateDataForRules();this._searchFormInstance.suppressRequestForQuery=this.getSuppressRequestForQuery()},i}();n.SearchForm.ScopeExtensions.push(new i)})(t=n.AS||(n.AS={}))}(Bing||(Bing={})),function(){var n=new Bing.AS.Canvas,t=Bing.AS.CommonPrefixDataProvider?new Bing.AS.CommonPrefixDataProvider:new Bing.AS.DataProvider,i=Bing.AS.BingAtWorkDataProvider?new Bing.AS.BingAtWorkDataProvider:null,r=Bing.AS.BingAtWorkSuggestionsParser?new Bing.AS.BingAtWorkSuggestionsParser:null,u=Bing.AS.WebClientInstrumentation?new Bing.AS.WebClientInstrumentation:null,f=new Bing.AS.WebCore(n,t,i,u,r);sa_inst=new Bing.AS.SearchForm(sa_config,f);sa_inst.init("sa_inst");sa_eL&&sa_inst.show();_w.sj_evt&&sj_evt.fire("autoSugLoaded");sj_evt.bind("ajax.load",function(n){var t=n&&n[1];t&&t.isInstantRequest&&_w.sj_evt&&sj_evt.fire("autoSugLoaded")})}()